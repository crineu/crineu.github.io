<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">

    <title>Idades de crianças | crineu.github.io</title>
    <meta name="description" content="Cálculos de idades de crianças" />
    <link rel="canonical" href="https://crineu.github.io/" />
    <meta property="og:url" content="https://crineu.github.io/" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="./style.css">

    <script src="./moment.min.js"></script>
    <script src="./moment.pt-br.js"></script>
</head>

<body>
    <section class="page-header">
        <h1 class="project-name">Meus piá em <input id="date_input" type="date" class="btn" onchange="update(event);"></h1>
        <h2 class="project-tagline">Cálculo da idade das criança</h2>
    </section>

    <section class="main-content">

        <h1 id="henriquinho--">Henriquinho | <strong><span id="id_age_henry"></span></strong></h1>

        <blockquote>
            <p><span id="id_bday_henry"></span> (~ <span id="id_days_henry"></span> dias)</p>
        </blockquote>

        <p>Translação terrestre em <strong><span id="id_next_henry"></span></strong></p>

        <p>Tinha a idade do mano mais ou menos em <strong><span id="id_past_henry"></span></strong></p>

        <hr />

        <p><strong><span id="id_age_diff"></span></strong> depois…</p>

        <hr />
        <h1 id="eduardinho--">Eduardinho | <strong><span id="id_age_diddy"></span></strong></h1>

        <blockquote>
            <p><span id="id_bday_diddy"></span>  (~ <span id="id_days_diddy"></span> dias)</p>
        </blockquote>

        <p>Translação terrestre em <strong><span id="id_next_diddy"></span></strong></p>
        <p>Terá a idade do mano ali por <strong><span id="id_futu_diddy"></span></strong></p>

        <footer class="site-footer">
            <span class="site-footer-credits">This page was generated by myself.</span>
        </footer>
    </section>

    <script type="text/javascript">
        document.getElementById("date_input").value = moment().format('yyyy-MM-DD');
        update();

        // mo_* represents a 'moment'   = point in time
        // du_* represents a 'duration' = time interval
        function update() {
            var BASE = moment(document.getElementById("date_input").value);

            var henry = moment('2013-08-26T09:02-0300');
            var diddy = moment('2016-12-01T18:05-0300');

            var du_age_diff = moment.duration(diddy.diff(henry));

            var du_age_henry = moment.duration(moment().diff(henry));
            var du_age_diddy = moment.duration(moment().diff(diddy));
            var du_age_base_henry = moment.duration(BASE.diff(henry));
            var du_age_base_diddy = moment.duration(BASE.diff(diddy));

            var mo_next_henry = henry.clone().add(du_age_henry.years() + 1, 'years');
            var mo_next_diddy = diddy.clone().add(du_age_diddy.years() + 1, 'years');

            var mo_past_henry = henry.clone().add(du_age_base_diddy);
            var mo_futu_diddy = diddy.clone().add(du_age_base_henry);


            document.getElementById("id_bday_henry").innerHTML = henry.format('LL');
            document.getElementById("id_bday_diddy").innerHTML = diddy.format('LL');

            document.getElementById("id_age_diff").innerHTML = du_to_str(du_age_diff);

            document.getElementById("id_age_henry").innerHTML = du_to_str(du_age_base_henry);
            document.getElementById("id_age_diddy").innerHTML = du_to_str(du_age_base_diddy);
            document.getElementById("id_days_henry").innerHTML = Math.floor(du_age_base_henry.asDays()).toLocaleString('pt');
            document.getElementById("id_days_diddy").innerHTML = Math.floor(du_age_base_diddy.asDays()).toLocaleString('pt');

            document.getElementById("id_next_henry").innerHTML = du_to_str(moment.duration(mo_next_henry.diff(moment())));
            document.getElementById("id_next_diddy").innerHTML = du_to_str(moment.duration(mo_next_diddy.diff(moment())));

            document.getElementById("id_past_henry").innerHTML = mo_past_henry.format('LL');
            document.getElementById("id_futu_diddy").innerHTML = mo_futu_diddy.format('LL');

            function du_to_str(duration) {
                var years = duration.years();
                var months = duration.months();
                var days = duration.days() + 1;
                var text = "";

                if (years != 0) {
                    text += years + (Math.abs(years) == 1 ? " ano, " : " anos, ");
                }
                if (months != 0) {
                    text += months + (Math.abs(months) == 1 ? " mês e " : " meses e ");
                }

                text += days + (days == 1 ? " dia" : " dias ");
                return text;
            }
        }

    </script>

</body>
</html>
